@model HomeViewModel
@{
	ViewData["Title"] = "Home Page";
}

<div class="row">
	<div class="col-md-6">
		<h2>@Model.Measurement.Name</h2>
	</div>
</div>
<div class="row">    
	<div class="col-md-6">
		<svg id="chart" />
		<ul id="chartLegend">
			
		</ul>
	</div>
	<div class="col-md-6">       
		<table class="table">
			<thead>
				<tr>
					<th>Date</th>
					@foreach (var sensorRole in Model.Measurement.SensorRoles.OrderBy(r => r.RoleName))
					{
						<th>@sensorRole.RoleName</th>
					}
				</tr>
			</thead>
			<tbody>
				@foreach (var readingsGroup in Model.Readings)
				{
					<tr>
						<td>@readingsGroup.Key</td>
						@foreach (var reading in readingsGroup.OrderBy(r => r.Source))
						{
							<td>@reading.Value</td>
						}
					</tr>
				}
			</tbody>
		</table>
	</div>
</div>

@section scripts {
<script>
	var offset = @TimeZoneInfo.Local.BaseUtcOffset.TotalHours;
	var data = @Html.Raw(JsonConvert.SerializeObject(Model.Readings));
	var strokes = ['blue','red','green','brown','orange','yellow','pink'];
	
	$(document).ready(function() {
	    frontPageChart();
	});
</script>
}